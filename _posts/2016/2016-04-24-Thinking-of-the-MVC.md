---
title: MVC 模式随想
tags: [编程,日志]
---
编程的过程中, 在解决格式各样的问题的过程中, 会出现对某类问题更好的解决方法, 这种对某类特殊问题的解决方案的抽象就是编程模式. 今天我想说说 MVC 编程模式.

MVC 的全称是 Module-View-Controller, 也就是模型-视图-控制器.

模型指的是对问题的抽象, 无论现实中的问题是多么的复杂, 最后要能被计算机存储计算, 就必然的变成数据. 所以问题的模型, 就一定是看看这个问题涉及到了那些数据, 这些数据之间的关系是什么, 怎么存储这些数据, 怎么检索这些数据这样的问题. 所以对魔模型来说, 基本上就是要把程序语言中用到的数据记录到数据库中, 或者把数据库中的数据取出来, 变成计算机语言中语法合法的对象, 以便在程序中进一步的处理这些数据.

视图, 其实就是最准用户可以看到的内容, 如果你是做一个网站, 那么最后的结果就是浏览器能解析的 HTML 或者说 最终用户能看到的页面内容, 在从数据库中获得的数据不变的情况下, 重新安排数据的展示方式, 这是非常普通的情况. 采用了 MVC 模型之后, M　和　V 隔离, 这样 V 的变化不会影响 M , 这样就可以在尽量减少系统的改动, 而满足需求的变动.

控制器, 其实是业务的核心, 它负责处理商业逻辑, 并把模型和视图整合起来, 使系统可以真正的运行起来. 其实业务的逻辑是变动最不频繁的, 一旦业务逻辑推翻从来了, 那么这个 MVC 三部分就都需要重新写了.

这几天做的工作是为手机端 APP 写应用接口, 其实能就是做 M 和 C 的工作. C 做的事情, 就是要判断怎么处理手机 APP 发送的请求, 而 M 做的事情就是如何把数据存入数据库, 或如何从数据库中取出相应的数据.

在刚开始建立项目的时候, 我并没有想到用 MVC 的模型来处理, M 和 C 的功能混合在一起, 所以这样, 第一是因为自己的编程素养还不够高, 第二是因为把代码混在一起, 其实是最自然的方式, 功能调试通了, 系统也就完成了, 不需要什么最后的系统集成部分, 劣势嘛, 也很显然, 当出问题的时候比较难以定位问题的原因(代码混在一起, 必然的结果就是源文件很大), 或者当需求有了改动的时候, 需要调整的代码比较多, 引入新问题的可能性比较大. 归根结蒂就是完成不同功能的代码模块之间是紧耦合的.

其实绝大多数的编程模式要解决的问题, 都是为了实行, 代码模块之间紧耦合, 模块与模块之间松耦合这个根本目标. 这个目标的前半部分相对来说比较容易实现, 因为人天性就有把相关的部分放在一起的习惯, 所以有联系的功能往往会放到一个模块中去. 而因为人类的这个天性, 所以后面的部分就比较难以实现, 需要在编程的时候, 特别的给予注意才能达到目标. 有联系, 但是连续的不是那么密切, 这个时候就应该以松耦合的形式来设计代码, 把一个大的模块, 分解成几个功能不同的子模块.

其实编程和人生有些类似, 虽然可以讨论在当下的社会规范中, 该如何理想的生活, 如何合理的解决问题, 但是当我们真正面临问题的时候, 我们是不是真的立刻就想到了社会规范了呢? 我想很多时候, 我们就是要尝试, 修正, 继续尝试, 这样的循环探索的. 编程也是一样, 一开始就想着如何划分模块, 如何做抽象, 往往难以有真正的做出好的工作了. 我想应该来在有一点代码量的时候, 就思考一下是不是应该有新的子模块了. 比如如果一个文件要超过了1000行, 但是自己还需要向其中添加新的功能, 那是不是就意味着, 其实应该把这个文化分成几个小的文件呢!

小问题总是容易解决的, 而一堆小问题, 推在一起解决, 就难免会出现这样或那样的问题. 关于模块直接的松耦合问题, 应该根据代码的规模, 代码的作用的不同, 不时的划分子模块来解决.
